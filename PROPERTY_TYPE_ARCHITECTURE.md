# Property Type Filter - Architecture Diagram

## ğŸ—ï¸ Complete System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            HOTEL BOOKING SYSTEM                             â”‚
â”‚                         Property Type Filter Flow                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           1. HOMEPAGE                                        â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚              PropertyList Component (PropertyList.jsx)             â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â”‚   API Call: GET /hotels/countByType                               â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚   â”‚   â”‚ Display 5 Property Type Cards:                           â”‚   â”‚   â”‚
â”‚   â”‚   â”‚                                                          â”‚   â”‚   â”‚
â”‚   â”‚   â”‚  [Hotel ğŸ›ï¸]  [Apartments ğŸ¢]  [Resorts ğŸŒ³]              â”‚   â”‚   â”‚
â”‚   â”‚   â”‚  25 places   18 places        12 places                 â”‚   â”‚   â”‚
â”‚   â”‚   â”‚                                                          â”‚   â”‚   â”‚
â”‚   â”‚   â”‚  [Villas ğŸš•]  [Cabins ğŸ ]                               â”‚   â”‚   â”‚
â”‚   â”‚   â”‚  8 places    5 places                                    â”‚   â”‚   â”‚
â”‚   â”‚   â”‚                                                          â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â”‚   onClick Handler: handlePropertyClick(type)                      â”‚   â”‚
â”‚   â”‚   - Save to localStorage: { type, timestamp }                    â”‚   â”‚
â”‚   â”‚   - Navigate to: /hotels?type=hotel                              â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â”‚ Click "hotel"
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           2. LIST PAGE                                       â”‚
â”‚                                                                              â”‚
â”‚   URL: http://localhost:3000/hotels?type=hotel                              â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                    List Component (List.jsx)                       â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â”‚   1. Read URL Query Parameters:                                   â”‚   â”‚
â”‚   â”‚      const typeParam = searchParams.get("type");                  â”‚   â”‚
â”‚   â”‚      Result: typeParam = "hotel"                                  â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â”‚   2. Prepare Request Payload:                                     â”‚   â”‚
â”‚   â”‚      {                                                            â”‚   â”‚
â”‚   â”‚        "city": "",              // Optional - empty for all       â”‚   â”‚
â”‚   â”‚        "type": "hotel",         // Filter by type                 â”‚   â”‚
â”‚   â”‚        "roomRequests": [        // Guest requirements             â”‚   â”‚
â”‚   â”‚          { "adults": 1, "children": 0 }                          â”‚   â”‚
â”‚   â”‚        ],                                                         â”‚   â”‚
â”‚   â”‚        "startDate": "2024-02-15T00:00:00Z",                      â”‚   â”‚
â”‚   â”‚        "endDate": "2024-02-17T00:00:00Z",                        â”‚   â”‚
â”‚   â”‚        "roomsRequested": 1                                        â”‚   â”‚
â”‚   â”‚      }                                                            â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â”‚   3. Call Backend API:                                            â”‚   â”‚
â”‚   â”‚      POST /hotels/search-available                                â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                      API Request + type filter
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         3. BACKEND API                                       â”‚
â”‚                                                                              â”‚
â”‚   Route: POST /hotels/search-available (api/routes/hotels.js)               â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  1. Extract Request Body:                                         â”‚   â”‚
â”‚   â”‚     const { city, roomRequests, type } = req.body;                â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â”‚  2. Validate Input:                                               â”‚   â”‚
â”‚   â”‚     if (!city && !type) {                                         â”‚   â”‚
â”‚   â”‚       return error "City or type required"                        â”‚   â”‚
â”‚   â”‚     }                                                             â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â”‚  3. Build MongoDB Query Filter:                                   â”‚   â”‚
â”‚   â”‚     const query = {};                                             â”‚   â”‚
â”‚   â”‚     if (type) {                                                   â”‚   â”‚
â”‚   â”‚       query.type = type.toLowerCase();  // "hotel"                â”‚   â”‚
â”‚   â”‚     }                                                             â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â”‚  4. Query Database:                                               â”‚   â”‚
â”‚   â”‚     const hotels = await Hotel.find(query);                       â”‚   â”‚
â”‚   â”‚     // Same as: Hotel.find({ type: "hotel" })                    â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â”‚  5. Check Room Availability:                                      â”‚   â”‚
â”‚   â”‚     - For each hotel, get all rooms                              â”‚   â”‚
â”‚   â”‚     - Check if dates are available                               â”‚   â”‚
â”‚   â”‚     - Verify capacity matches guest count                        â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â”‚  6. Return Available Hotels:                                      â”‚   â”‚
â”‚   â”‚     res.status(200).json(availableHotels);                        â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                          Array of hotels
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        4. DATABASE QUERY                                     â”‚
â”‚                                                                              â”‚
â”‚   MongoDB Collection: hotels                                                â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ Query:  db.hotels.find({ type: "hotel" })                         â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â”‚ Sample Results:                                                    â”‚   â”‚
â”‚   â”‚ [                                                                  â”‚   â”‚
â”‚   â”‚   {                                                               â”‚   â”‚
â”‚   â”‚     "_id": "507f1f77bcf86cd799439011",                            â”‚   â”‚
â”‚   â”‚     "name": "Sunny Hotel HCM",                                    â”‚   â”‚
â”‚   â”‚     "type": "hotel",        â—„â”€â”€ Filter applied here              â”‚   â”‚
â”‚   â”‚     "city": "Ho Chi Minh",                                        â”‚   â”‚
â”‚   â”‚     "cheapestPrice": 50,                                          â”‚   â”‚
â”‚   â”‚     "rooms": [...],                                               â”‚   â”‚
â”‚   â”‚     ...                                                           â”‚   â”‚
â”‚   â”‚   },                                                              â”‚   â”‚
â”‚   â”‚   {                                                               â”‚   â”‚
â”‚   â”‚     "_id": "507f1f77bcf86cd799439012",                            â”‚   â”‚
â”‚   â”‚     "name": "Luxury Hotel Hanoi",                                â”‚   â”‚
â”‚   â”‚     "type": "hotel",                                              â”‚   â”‚
â”‚   â”‚     "city": "Hanoi",                                              â”‚   â”‚
â”‚   â”‚     "cheapestPrice": 75,                                          â”‚   â”‚
â”‚   â”‚     ...                                                           â”‚   â”‚
â”‚   â”‚   },                                                              â”‚   â”‚
â”‚   â”‚   ...                                                             â”‚   â”‚
â”‚   â”‚ ]                                                                  â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                          API Response
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    5. LIST PAGE - DISPLAY RESULTS                            â”‚
â”‚                                                                              â”‚
â”‚   setData(response.data)  // State update with hotel array                   â”‚
â”‚                                                                              â”‚
â”‚   Apply Additional Filters (Client-Side):                                    â”‚
â”‚   - Price range (min/max)                                                   â”‚
â”‚   - Star rating                                                             â”‚
â”‚                                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚               Search Results: Hotels                               â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â”‚  Filter: Type = "hotel"  [Show All] [Change]                     â”‚   â”‚
â”‚   â”‚  Price: $50 - $200  |  Rating: â˜…â˜…â˜…â˜…â˜†                            â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚   â”‚  â”‚ [Hotel Card]                              [Hotel Card]     â”‚   â”‚   â”‚
â”‚   â”‚  â”‚                                                          â”‚   â”‚   â”‚
â”‚   â”‚  â”‚ Sunny Hotel HCM          Luxury Hotel Hanoi             â”‚   â”‚   â”‚
â”‚   â”‚  â”‚ â˜…â˜…â˜…â˜…â˜† 4.5 (234 reviews)  â˜…â˜…â˜…â˜…â˜… 4.8 (512 reviews)      â”‚   â”‚   â”‚
â”‚   â”‚  â”‚ $50 per night            $75 per night                  â”‚   â”‚   â”‚
â”‚   â”‚  â”‚ Ho Chi Minh              Hanoi                          â”‚   â”‚   â”‚
â”‚   â”‚  â”‚                                                          â”‚   â”‚   â”‚
â”‚   â”‚  â”‚ [Check Availability]     [Check Availability]           â”‚   â”‚   â”‚
â”‚   â”‚  â”‚                                                          â”‚   â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚   â”‚  â”‚ [Hotel Card]                              [Hotel Card]     â”‚   â”‚   â”‚
â”‚   â”‚  â”‚ ...                                        ...              â”‚   â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚   â”‚                                                                    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Data Flow Diagram

```
User Click
    â”‚
    â”œâ”€ Save to localStorage
    â”‚  â””â”€> { type: "hotel", timestamp: "..." }
    â”‚
    â””â”€> Navigate URL
       â””â”€> /hotels?type=hotel
           â”‚
           â”œâ”€ Read URL param: typeParam = "hotel"
           â”‚
           â”œâ”€ Build API payload:
           â”‚  â””â”€> { city: "", type: "hotel", roomRequests: [...] }
           â”‚
           â””â”€> POST /hotels/search-available
              â”‚
              â”œâ”€ Backend validates: type is provided âœ“
              â”‚
              â”œâ”€ Build MongoDB query: { type: "hotel" }
              â”‚
              â”œâ”€ Query database: Hotel.find({ type: "hotel" })
              â”‚
              â”œâ”€ Check availability for each hotel
              â”‚
              â””â”€> Return: [{ hotel1 }, { hotel2 }, ...]
                 â”‚
                 â””â”€> Frontend displays results
                    â””â”€> User sees all hotels of type "hotel"
```

---

## ğŸ”„ Alternative Flows

### Flow 1: Type + City Filter
```
URL: /hotels?type=apartment&city=Ho Chi Minh

â†’ typeParam = "apartment"
â†’ cityParam = "Ho Chi Minh"

Backend Query: { type: "apartment", city: /Ho Chi Minh/i }

Result: Only apartments in Ho Chi Minh
```

### Flow 2: Type + Date Range
```
URL: /hotels?type=resort&startDate=2024-02-15&endDate=2024-02-17

â†’ Payload: {
    type: "resort",
    startDate: "2024-02-15T00:00:00Z",
    endDate: "2024-02-17T00:00:00Z"
  }

Result: Only resorts with availability on those dates
```

### Flow 3: Type + City + Dates + Guests
```
URL: /hotels?type=villa&city=Dalat&startDate=...&endDate=...&options={adults:2,children:1}

â†’ Payload: {
    city: "Dalat",
    type: "villa",
    roomRequests: [{ adults: 2, children: 1 }],
    startDate: "...",
    endDate: "..."
  }

Result: Only villas in Dalat with availability for 3 people
```

---

## ğŸ¯ Component Structure

```
â”Œâ”€ App.js
â”‚  â”œâ”€ Router
â”‚  â”‚  â”œâ”€ / (Home)
â”‚  â”‚  â”‚  â””â”€ PropertyList (Shows 5 property types)
â”‚  â”‚  â”‚     â””â”€ Click â†’ Navigate with type param
â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€ /hotels (List Page)
â”‚  â”‚     â””â”€ List (Filters hotels by type)
â”‚  â”‚        â”œâ”€ Header
â”‚  â”‚        â”œâ”€ SearchBar
â”‚  â”‚        â”œâ”€ Filters (Price, Rating, etc.)
â”‚  â”‚        â””â”€ SearchItem[] (Hotel cards)
â”‚  â”‚
â”‚  â””â”€ API Layer
â”‚     â”œâ”€ useFetch hook (Get countByType)
â”‚     â””â”€ axiosInstance (POST search-available)
â”‚
â””â”€ Backend
   â”œâ”€ routes/hotels.js
   â”‚  â”œâ”€ POST /search-available
   â”‚  â”œâ”€ GET /countByType
   â”‚  â””â”€ ...
   â”‚
   â”œâ”€ controllers/hotel.js
   â”‚  â”œâ”€ getHotels()
   â”‚  â””â”€ countByType()
   â”‚
   â””â”€ models/Hotel.js
      â””â”€ type field with enum validation
```

---

## ğŸ’¾ Database Schema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Hotel Document (MongoDB)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ {                                                   â”‚
â”‚   "_id": ObjectId,                                  â”‚
â”‚   "name": "Hotel Name",                             â”‚
â”‚   "type": "hotel",        â—„â”€â”€ Filter field         â”‚
â”‚   "city": "Ho Chi Minh",                            â”‚
â”‚   "address": "123 Street",                          â”‚
â”‚   "distance": "500m",                               â”‚
â”‚   "title": "Luxury Hotel",                          â”‚
â”‚   "desc": "Beautiful hotel...",                     â”‚
â”‚   "rating": 4.5,                                    â”‚
â”‚   "rooms": [ObjectId, ObjectId, ...],              â”‚
â”‚   "cheapestPrice": 50,                              â”‚
â”‚   "featured": true,                                 â”‚
â”‚   "star": 4,                                        â”‚
â”‚   "createdAt": Date,                                â”‚
â”‚   "updatedAt": Date                                 â”‚
â”‚ }                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Indexes (for better query performance):
- type: 1            (for filtering by type)
- city: 1            (for filtering by city)
- type: 1, city: 1   (for combined filters)
```

---

## ğŸ” Query Examples

### MongoDB Queries

```javascript
// Find all hotels
db.hotels.find({})

// Find all hotels of type "hotel"
db.hotels.find({ type: "hotel" })

// Find apartments in Ho Chi Minh
db.hotels.find({ type: "apartment", city: "Ho Chi Minh" })

// Count hotels by type
db.hotels.find({ type: "hotel" }).count()

// Find hotels with price range
db.hotels.find({ type: "hotel", cheapestPrice: { $gte: 50, $lte: 200 } })

// Find featured hotels of specific type
db.hotels.find({ type: "resort", featured: true })
```

### API Queries

```javascript
// Filter by type only
GET /hotels?type=hotel

// Filter by type and city
GET /hotels?type=apartment&city=Ho Chi Minh

// Filter by type with price range
GET /hotels?type=resort&min=100&max=300

// Search available (POST)
POST /hotels/search-available
Body: { type: "villa", roomRequests: [...] }
```

---

## ğŸ“‹ Type Values Reference

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Database Value â”‚ Display Text â”‚ URL Parameter       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ hotel          â”‚ hotel        â”‚ ?type=hotel         â”‚
â”‚ apartment      â”‚ apartments   â”‚ ?type=apartment     â”‚
â”‚ resort         â”‚ resorts      â”‚ ?type=resort        â”‚
â”‚ villa          â”‚ villas       â”‚ ?type=villa         â”‚
â”‚ cabin          â”‚ cabins       â”‚ ?type=cabin         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Note: Database stores lowercase, display text is mapped in component
```

---

## ğŸš€ Performance Optimization

### Database Indexes (Recommended)

```javascript
// In MongoDB
db.hotels.createIndex({ type: 1 })
db.hotels.createIndex({ type: 1, city: 1 })
db.hotels.createIndex({ type: 1, cheapestPrice: 1 })
```

### Caching Strategy

```javascript
// Frontend - Cache property counts
const { data, loading } = useFetch("/hotels/countByType");
// Result cached for 5 minutes

// Backend - Cache countByType results
Redis.set("countByType", JSON.stringify(results), "EX", 300);
```

### Pagination (Optional for Large Results)

```javascript
POST /hotels/search-available
Body: {
  type: "hotel",
  page: 1,
  limit: 20,  // 20 results per page
}
```
